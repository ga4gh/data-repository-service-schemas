== Executive Summary

The Data Repository Service (DRS) API provides a generic interface to data repositories so data consumers, including workflow systems, can access data in a single, standard way regardless of where it's stored and how it's managed.

== Motivation

[cols="40a,60a"]
|===
|Data sharing requires portable data, consistent with the FAIR data principles (findable, accessible, interoperable, reusable). Today’s researchers and clinicians are surrounded by potentially useful data, but often need bespoke tools and processes to work with each dataset. And today’s data publishers don’t have a reliable way to make their data useful to all (and only) the people they choose.
|image::figure1.png[] 
_Figure 1: there’s an ocean of data, with many different tools to drink from it, but no guarantee that any tool will work with any subset of the data_
|===

[cols="40a,60a"]
|===
|We need a standard way for data producers to make their data available to data consumers, that supports the control needs of the former and the access needs of the latter. And we need it to be interoperable, so anyone who builds access tools and systems can be confident they'll work with all the data out there, and anyone who publishes data can be confident it will work with all the tools out there.
|image::figure2.png[]
_Figure 2: by defining a standard Data Repository API, and adapting tools to use it, every data publisher can now make their data useful to every data consumer_
|===


[cols="75a,25a"]
|===

|We envision a world where:

* there are many many **data consumers**, working in research and in care, who can use the tools of their choice to access any all data that they have permission to see
* there are many **data access tools** and platforms, supporting discovery, visualization, analysis, and collaboration
* there are many **data repositories**, each with their own policies and characteristics, which can be accessed by a variety of tools 
* there are many **data publishing tools** and platforms, supporting a variety of data lifecycles and formats
* there are many many **data producers**, generating data of all types, who can use the tools of their choice to make their data as widely available as is appropriate

|image::figure3.png[]  
_Figure 3: a standard Data Repository API enables an ecosystem of data producers and consumers_
|===

This spec defines a standard **Data Repository Service (DRS) API** (“the yellow box”), to enable that ecosystem of data producers and consumers. Our goal is that all data consumers need to know about a data repo is "here's the DRS endpoint to access it", and all data publishers need to know about tapping into the world of consumption tools is "here's how to tell it where my DRS endpoint lives".


== Introduction

This document describes the DRS API and provides details on the specific endpoints, request formats, and response.  It is intended to provide key information for developers of DRS-compatible services as well as clients that will call these DRS services.

Use cases include:

* GET of resource ID and return JSON metadata describing object
* GET of resource ID and return JSON with URLs for data read access.
* GET of resources by alias
* Bundles of multiple objects
* Versioning of objects (and bundles if supported)

== Standards

The DRS API specification is written in OpenAPI and embodies a RESTful service philosophy.  It uses JSON in requests and responses and standard HTTP/HTTPS for information transport.

== Authorization & Authentication

Users must supply credentials that establish their identity and authorization in order to use a DRS endpoint. We recommend that DRS implementations use an OAuth2 https://oauth.net/2/bearer-tokens/[bearer token], although they can choose other mechanisms if appropriate. DRS callers can use the `auth_instructions_url` from the https://ga4gh.github.io/workflow-execution-service-schemas/#/WorkflowExecutionService/GetServiceInfo[service-info endpoint] to learn how to obtain and use a bearer token for a particular implementation.

The DRS implementation is responsible for checking that a user is authorized to submit workflow run requests. The particular authorization policy is up to the DRS implementer.

Systems like DRS need to also address the ability to pass credentials with jobs for input and output access.  In the current
version of DRS, the passing of credentials to authenticate and authorize access to inputs and outputs, as well as mandates about necessary file transfer protocols to support, are out of scope.  However, parallel work on the Data Object Service is addressing ways to pass around access credentials with data object references, opening up the possibility that a future version of DRS will provide concrete mechanisms for workflow runs to access data using credentials different than those used for DRS.  This is a work in progress and support of DOS in DRS will be added in a future release of DRS.
